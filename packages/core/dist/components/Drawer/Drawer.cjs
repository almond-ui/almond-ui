'use client';
"use strict";var e=require("tslib"),r=require("react/jsx-runtime"),s=require("@floating-ui/react"),t=require("../../hooks/use-focus-trap.hook.cjs"),o=require("../../hooks/use-keypress.cjs"),a=require("../../theme/theme.context.cjs"),i=require("../../utils/usePropId.cjs"),l=require("react"),n=require("../Overlay/Overlay.cjs"),c=require("tailwind-merge");const u={closeOnEscape:!0,color:"white",open:!1,overlayBlur:"sm",overlayCloseOnClick:!0,overlayColor:"dark",overlayOpacity:"50",position:"right",shadow:"base"},p=l.forwardRef(((p,y)=>{const d=a.useComponentTheme("Drawer"),h=Object.assign(Object.assign({},u),p),{children:m,className:f="",closeOnEscape:v,onClose:O,open:C,overlayBlur:g,overlayCloseOnClick:j,overlayColor:w,overlayOpacity:b,position:k,shadow:q}=h,x=e.__rest(h,["children","className","closeOnEscape","onClose","open","overlayBlur","overlayCloseOnClick","overlayColor","overlayOpacity","position","shadow"]),E=i.usePropId(p.id),N=l.useRef(null),[M,R]=l.useState(!1),X=t.useFocusTrap(M),Y=s.useMergeRefs([N,X||null,y||null]),B=l.useRef(null),F=l.useMemo((()=>c.twMerge(d({className:f,position:k,shadow:q}))),[f,k,q,d]);o.useKeypress("Escape",v,O);const P=l.useMemo((()=>{switch(k){case"left":default:return["translateX(-100%)","translateX(0%)"];case"right":return["translateX(100%)","translateX(0%)"];case"top":return["translateY(-100%)","translateY(0%)"];case"bottom":return["translateY(100%)","translateY(0%)"]}}),[k]);return l.useEffect((()=>{const e=C?"ease-in-out":"ease-out",r=C?150:100,s=new KeyframeEffect(N.current,[{opacity:.75,transform:P[0],visibility:"hidden"},{opacity:1,visibility:"visible",transform:P[1]}],{duration:r,fill:"both",easing:e});B.current=new Animation(s,document.timeline)}),[C,N]),l.useEffect((()=>{B.current&&(C?(B.current.play(),B.current.onfinish=()=>{R(!0)}):(B.current.reverse(),R(!1)))}),[C]),r.jsxs(r.Fragment,{children:[r.jsx(n,{open:C,onClick:()=>{j&&O&&O()},blur:g,color:w,opacity:b,closeOnClick:j}),r.jsx(s.FloatingPortal,{children:r.jsx("div",Object.assign({id:E,role:"dialog","aria-hidden":!C,style:{opacity:0,visibility:"hidden"},ref:Y,className:F},x,{children:m}))})]})}));p.displayName="Drawer",module.exports=p;
