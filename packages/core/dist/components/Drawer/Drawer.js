'use client';
import{__rest as e}from"tslib";import{jsxs as r,Fragment as o,jsx as t}from"react/jsx-runtime";import{useMergeRefs as a,FloatingPortal as s}from"@floating-ui/react";import{useFocusTrap as i}from"../../hooks/use-focus-trap.hook.js";import{useKeypress as l}from"../../hooks/use-keypress.js";import{useComponentTheme as n}from"../../theme/theme.context.js";import{usePropId as c}from"../../utils/usePropId.js";import{forwardRef as m,useRef as p,useState as u,useMemo as y,useEffect as d}from"react";import f from"../Overlay/Overlay.js";import{twMerge as h}from"tailwind-merge";const v={closeOnEscape:!0,color:"white",open:!1,overlayBlur:"sm",overlayCloseOnClick:!0,overlayColor:"dark",overlayOpacity:"50",position:"right",shadow:"base"},O=m(((m,O)=>{const C=n("Drawer"),b=Object.assign(Object.assign({},v),m),{children:w,className:k="",closeOnEscape:g,onClose:j,open:E,overlayBlur:N,overlayCloseOnClick:X,overlayColor:Y,overlayOpacity:x,position:B,shadow:D}=b,A=e(b,["children","className","closeOnEscape","onClose","open","overlayBlur","overlayCloseOnClick","overlayColor","overlayOpacity","position","shadow"]),I=c(m.id),K=p(null),[P,q]=u(!1),z=i(P),F=a([K,z||null,O||null]),G=p(null),H=y((()=>h(C({className:k,position:B,shadow:D}))),[k,B,D,C]);l("Escape",g,j);const J=y((()=>{switch(B){case"left":default:return["translateX(-100%)","translateX(0%)"];case"right":return["translateX(100%)","translateX(0%)"];case"top":return["translateY(-100%)","translateY(0%)"];case"bottom":return["translateY(100%)","translateY(0%)"]}}),[B]);return d((()=>{const e=E?"ease-in-out":"ease-out",r=E?150:100,o=new KeyframeEffect(K.current,[{opacity:.75,transform:J[0],visibility:"hidden"},{opacity:1,visibility:"visible",transform:J[1]}],{duration:r,fill:"both",easing:e});G.current=new Animation(o,document.timeline)}),[E,K]),d((()=>{G.current&&(E?(G.current.play(),G.current.onfinish=()=>{q(!0)}):(G.current.reverse(),q(!1)))}),[E]),r(o,{children:[t(f,{open:E,onClick:()=>{X&&j&&j()},blur:N,color:Y,opacity:x,closeOnClick:X}),t(s,{children:t("div",Object.assign({id:I,role:"dialog","aria-hidden":!E,style:{opacity:0,visibility:"hidden"},ref:F,className:H},A,{children:w}))})]})}));O.displayName="Drawer";export{O as default};
