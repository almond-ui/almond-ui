'use client';
import{__rest as r}from"tslib";import{jsx as t,jsxs as e}from"react/jsx-runtime";import{SelectorTab as o}from"./SelectorTab/SelectorTab.js";import{useMergeRefs as i}from"@floating-ui/react";import{useHorizontalArrows as a}from"../../hooks/use-horizontal-arrows.hook.js";import{useComponentTheme as n}from"../../theme/theme.context.js";import{usePropId as s}from"../../utils/usePropId.js";import{forwardRef as c,useRef as l,useState as u,useMemo as d,useEffect as h,Children as p}from"react";import{twMerge as m}from"tailwind-merge";import{SelectorContextProvider as f}from"./Selector.context.js";const w={color:"dark",fullWidth:!1,orientation:"horizontal",radius:"md",shadow:"base",size:"md",tone:"solid",withAnimation:!0,withSeparator:!0},b=c(((o,c)=>{const b=n("Selector"),g=Object.assign(Object.assign({},w),o),{children:v,className:j="",color:y,fullWidth:z,onChange:S,orientation:x,radius:A,separator:N,shadow:O,size:T,tone:P,value:k,withAnimation:W,withSeparator:$}=g,C=r(g,["children","className","color","fullWidth","onChange","orientation","radius","separator","shadow","size","tone","value","withAnimation","withSeparator"]),R=s(o.id),q=l(null),B=i([c||null,q]),[I,L]=u(k),M=l(!0),D=l(null),E=l(null),[F,G]=u(""),H=new Map,J=d((()=>m(b.wrapper({className:j,fullWidth:z,orientation:x,radius:A,shadow:O,size:T}))),[j,z,x,A,O,T,b]),K=(r,t,e,o="md",i="horizontal",a=!0)=>{const n=r.getBoundingClientRect(),s=n.width,c=n.height;t.style.setProperty("width",`${s}px`),t.style.setProperty("height",`${c}px`),t.style.setProperty("top",`${r.offsetTop}px`),t.style.setProperty("left",`${r.offsetLeft}px`),G(b.base({color:H.get(e),size:o,radius:A,tone:P,initialRun:a,withAnimation:W}))};h((()=>{var r;if(!I)return;const t=null===(r=q.current)||void 0===r?void 0:r.querySelector('button[aria-checked="true"]');return t&&D.current?(K(t,D.current,I,T,x,M.current),M.current=!1,E.current=new ResizeObserver((r=>{D.current&&K(t,D.current,I,T,x,M.current)})),E.current.observe(D.current),()=>{E.current&&E.current.disconnect()}):void 0}),[I,y,z,x,A,T,P,W,$]),h((()=>{S&&!M.current&&S(I)}),[I]);const Q={activeTabAnchor:I,color:y,orientation:x,radius:A,separator:N,setActiveTabAnchor:L,shadow:O,size:T,tone:P,withSeparator:$};return p.map(v,(r=>{H.set(r.props.anchor,r.props.color||y)})),a(q),t(f,Object.assign({value:Q},{children:e("div",Object.assign({id:R,ref:B,role:"radiogroup",className:J},C,{children:[v,t("div",{ref:D,className:F})]}))}))}));b.displayName="Selector";const g=Object.assign(b,{Tab:o});export{g as default};
